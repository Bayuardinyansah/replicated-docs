In the following example, a conditional PostgreSQL resource is enabled in the `builder` key :

```yaml
apiVersion: kots.io/v1beta2
kind: HelmChart
metadata:
  name: samplechart
spec:
  chart:
    name: samplechart
    chartVersion: 3.1.7
  values:
    postgresql:
      enabled: repl{{ ConfigOptionEquals `postgres_type` `embedded_postgres`}}
  builder:
    postgresql:
      enabled: true
```

As shown above, `postgresql` is defined as a conditional resource in the `values` key, where the `postgresql` resource is deployed only when the user selects an `embedded_postgres` option on the admin console **Config** page.

To ensure that the PostgreSQL resource is included in the air gap bundle, the same `postgresql.enabled` value is added to the `builder` key and is hardcoded to `true`.