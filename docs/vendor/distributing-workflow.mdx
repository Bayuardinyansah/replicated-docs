import PrerequisitesWorkflows from "../partials/getting-started/_prerequisites-workflows.mdx"
import HelmInstallRequirements from "../partials/helm/_helm-install-requirements.mdx"
import PromoteUnstable from "../partials/releases/_promote-unstable.mdx"
import LicenseCreate from "../partials/releases/_license-create.mdx"
import ImageRegistryConnect from "../partials/releases/_image-registry-connect.mdx"
import TestDev from "../partials/releases/_test-dev.mdx"
import KurlInstaller from "../partials/releases/_kurl-installer.mdx"

# KOTS Release Workflows

This topic provides prerequisites and workflows for creating a Replicated KOTS release for your application with and without the Replicated SDK.

## About Releasing your Application

A KOTS release for your application can include a set of standard Kubernetes manifests, Helm charts, or Kubernetes Operators. (While an operator is technically deployed either using plain Kubernetes manifests or a Helm chart, we list it separately because of the advanced image management work needed to effectively deliver Operators into customer environments.) 

In addition to your application files, a release also includes [Replicated custom resources](/reference/custom-resource-about) that are used to invoke various Replicated KOTS functions.

After you create the first release for your application, you continue the process of authoring, testing, iterating on, and accepting a set of files for release to your customers. Replicated recommends that you create and test releases for your application in small iterations before sharing a release with your customers. To begin, see [Prerequisites](#prerequisites) below.

If you have questions about these workflows, you can post a question on our [Community site](https://community.replicated.com/).

## Supported Installation Types

From a single release, you can support one or more of these installation methods.

- **Install with Helm:**

  - Add your Helm chart app to a release in the vendor portal.
  - Optionally use the SDK with your Helm chart to get access to Replicated functionality.

- **Install with KOTS:**

  - KOTS is the Replicated installer available to vendors with KOTS entitlements. 
  - Provides support for installations on existing clusters, embedded clusters on virtual machines or bare metal servers, and air gap environments.

## Prerequisites

<PrerequisitesWorkflows/>

Additionally, supporting Helm installations has the following requirements:

<HelmInstallRequirements/>

## KOTS Releases with Helm and the SDK

**Audience:** The audiences for this workflow are:

  - Existing vendors who are using KOTS and want to support Helm installations
  - New vendors who want to use KOTS, Helm charts, and support Helm installations

When you create a KOTS release with Helm charts, you get the benefit of providing customers with the KOTS installer and admin console. However, you might need to provide some customers with the ability to install using the Helm CLI.
You can support Helm CLI installations in a KOTS release. Optionally, you can add the SDK to get the benefits of the SDK features with Helm installations, including the ability to use the proxy service for license validation without exposing your registry credentials.

Complete the following procedures to create and test a KOTS release that includes the SDK:

1. (Recommended) Familiarize yourself by using the SDK in integration mode. This lets you test the SDK API with mock data in a local environment without making changes to your release in the vendor portal. See [Developing Against the SDK API](replicated-sdk-development).

  Integration mode testing is a fast, reliable way to test and iterate every time you create or update a release, before committing changes in the vendor portal and performing full testing.

1. Add the SDK as a dependency to your Helm chart and package the Helm chart. See [Declare the SDK as a Dependency](replicated-sdk-using#declare-the-sdk-as-a-dependency) in _Using the SDK with Your Application (Beta)_.

1. Create an application or use an existing application in the vendor portal, and create a new release. See [Using the Vendor Portal](replicated-sdk-using#using-the-vendor-portal) in _Using the SDK with Your Application (Beta)_.

1. Add custom resources to add KOTS functionality to the KOTS release. See [Add KOTS Custom Resources](custom-resources).

1. <KurlInstaller/>

1. <PromoteUnstable/>

1. <LicenseCreate/>

1. <ImageRegistryConnect/>

1. Test your installation:

    - Helm Installation: See [Installing an Application with Helm (Beta)](install-with-helm)
    - KOTS and kURL Installation: See [About Installing an Application](installing-overview)

1. Validate that telemetry is showing up for the customer instance. Click through to the instance details and review the events. See [About Instance and Event Data](instance-insights-event-data).

After you install the first release for your application, return to the vendor portal to create a new release with additional functionality. For more information, see:

- [Add SDK Functionality](sdk-functionality-add)
- [Add KOTS Custom Resources](custom-resources) 


## KOTS Releases with Standard Manifests

**Audience:** Vendors who are new to using KOTS, and who only want to use standard Kubernetes manifests.

:::note
To use Kubernetes Operators, you skip connecting to a private registry and skip creating a Configuration screen in the admin console. You can use any of the other packaging functions. For more information, see [Package the Kubernetes Operator Application](operator-packaging-about).
:::

Complete the following procedures to create and test your first release:

1. Push your images to the Replicated registry if you plan to host your images on that registry. See [Push Images to the Replicated Registry](packaging-private-images#push-images-to-the-replicated-private-registry) in _Connecting to an Image Registry_.

    If you are using a different registry option, skip this step and proceed to the next step.

1. Create an application and create a release in the Replicated vendor portal. See [Creating a Release](releases-creating-releases) in _Managing Releases with the Vendor Portal_.

1. If you are using private images, either connect to an external private registry or update the image tags to point to the Replicated registry. See [Connecting to an Image Registry](packaging-private-images).

1. <KurlInstaller/>

1. <PromoteUnstable/>

1. <LicenseCreate/>

1. <TestDev/>

  After you install the first release for your application, return to the vendor portal to create a new release with additional functionality. For more information, see [Add KOTS Custom Resources](custom-resources). 

