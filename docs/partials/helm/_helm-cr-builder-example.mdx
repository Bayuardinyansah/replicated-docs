For example, a Helm chart might include a conditional PostgreSQL Deployment, as shown in the Helm template below:

```yaml
{{- if .Values.postgresql.enabled }}
apiVersion: apps/v1
kind: Deployment
metadata:
  name: postgresql
  labels:
    app: postgresql
spec:
  selector:
    matchLabels:
      app: postgresql
  template:
    metadata:
      labels:
        app: postgresql
    spec:
      containers:
      - name: postgresql
        image: "postgres:10.17"
        ports:
        - name: postgresql
          containerPort: 80
# ...
{{- end }}
```

In the HelmChart custom resource for this release, the PostgreSQL image is enabled in the `builder` key:

```yaml
apiVersion: kots.io/v1beta2
kind: HelmChart
metadata:
  name: samplechart
spec:
  chart:
    name: samplechart
    chartVersion: 3.1.7
  values:
    postgresql:
      enabled: repl{{ ConfigOptionEquals `postgres_type` `embedded_postgres`}}
  builder:
    postgresql:
      enabled: true
```

As shown above, `postgresql` is defined as conditional in the `values` key, where the `postgresql` image is included only when the user selects an `embedded_postgres` option on the admin console **Config** page.

To ensure that the `postgresql` image is included in the air gap bundle for the release, the same `postgresql.enabled` value is added to the `builder` key and is hardcoded to `true`.