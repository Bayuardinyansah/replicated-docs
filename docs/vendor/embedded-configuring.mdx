import AccessCluster from "../partials/embedded-cluster/_access-cluster.mdx"

# Using Embedded Cluster (Beta)

This topic describes how to use Replicated Embedded Cluster, including how to enable Embedded Cluster for a customer, create an Embedded Cluster config, install with Embedded Cluster, and more.

## Quick Start

Use the following steps to get started quickly with Embedded Cluster:

1. Create a new customer or edit an existing customer and select the **Embedded Cluster Enabled (Beta)** license option. Save the customer.

1. Create a new release that includes your application. In that release, create an Embedded Cluster config that includes, at minimum, the Embedded Cluster version you want to use. See the Embedded Cluster [GitHub repo](https://github.com/replicatedhq/embedded-cluster/releases) to find the latest version.

     Example Embedded Cluster config:

    ```yaml
    apiVersion: embeddedcluster.replicated.com/v1beta1
    kind: Config
    spec:
      version: 1.3.0+k8s-1.29
    ```

1. Save the release and promote it to the channel your customer is assigned to.

1. Return to the target customer page. At the top right, click **Install instructions** and choose **Embedded cluster**. A dialog appears with instructions on how to download the Embedded Cluster binary and install your application.

     ![Customer install instructions drop down button](/images/customer-install-instructions-dropdown.png)

     [View a larger version of this image](/images/customer-install-instructions-dropdown.png)
 
1. On a VM, run the commands in the **Embedded Cluster install instructions** dialog.

     <img alt="Embedded cluster install instruction dialog" src="/images/embedded-cluster-install-dialog.png" width="550px"/>

     [View a larger version of this image](/images/embedded-cluster-install-dialog.png)

1. Enter an Admin Console password when prompted.

     The Admin Console URL is printed when the installation finishes. Access the Admin Console to begin installing your application. Youâ€™ll have the opportunity to add nodes if you want a multi-node cluster. Then you can provide application config, run preflights, and deploy your application.

## Configure Embedded Cluster

To install your application with Embedded Cluster, an Embedded Cluster config must be created in a release. The Embedded Cluster config lets you define several characteristics about the cluster that will be created.

For more information, see [Embedded Cluster Config](/reference/embedded-config).

## Access an Embedded Cluster

<AccessCluster/>

:::note
If you encounter a typical workflow where your customers have to use the Embedded Cluster shell, reach out to Alex Parker at alexp@replicated.com. These workflows might be candidates for additional Admin Console functionality.
:::

## Additional Use Cases

This section outlines some additional use cases for Embedded Cluster. These are not officially supported features from Replicated, but are ways of using Embedded Cluster that we or our customers have experimented with that might be useful to you.

### NVIDIA GPU Operator

The NVIDIA GPU Operator uses the operator framework within Kubernetes to automate the management of all NVIDIA software components needed to provision GPUs. For more information about this operator, see the [NVIDIA GPU Operator](https://docs.nvidia.com/datacenter/cloud-native/gpu-operator/latest/overview.html) documentation. You can include the operator in your release as an additional Helm chart, or using the Embedded Cluster Helm extensions. For information about Helm extensions, see [Helm extensions](/reference/embedded-config#helm-extensions) in _Embedded Cluster Config_.

Using this operator with Embedded Cluster requires configuring the containerd options in the operator as follows:

```yaml
toolkit:
   env:
   - name: CONTAINERD_CONFIG
     value: /etc/k0s/containerd.d/nvidia.toml
   - name: CONTAINERD_SOCKET
     value: /run/k0s/containerd.sock
```   

## Related Topics

* [About Embedded Cluster](/vendor/embedded-overview)
* [Embedded Cluster Config](/reference/embedded-config)
* [Managing Embedded Clusters](/enterprise/cluster-management)
* [Generating a Bundle for Embedded Cluster](/enterprise/troubleshooting-an-app#generate-a-bundle-for-embedded-cluster) in _Generating Support Bundles for KOTS Installations_
* [Downloading the Embedded Cluster Binary](/vendor/embedded-download-binary)
* [Updating Embedded Clusters](/enterprise/updating-embedded)
* [Online Installation with Embedded Cluster](/enterprise/installing-embedded)