import RepositoryCicdNote from "../partials/releases/_repository-cicd-note.mdx"
import CreateReleaseUi from "../partials/releases/_create-release-ui.mdx"
import CreateNewAppCli from "../partials/releases/_create-new-app-cli.mdx"

# Creating Releases with Standard Manifest Files

This topic describes how to use the Replicated vendor portal or the replicated CLI to create and promote versions of your application using standard manifest files.

<RepositoryCicdNote/>

## Using the Vendor Portal

<CreateReleaseUi/>

## Using the CLI

### Prerequisite

Before you can create an application release with the CLI for the first time, you must install the replicated CLI and create an API token. See [Installing the replicated CLI](/reference/replicated-cli-installing).

### Create an Application

<CreateNewAppCli/>

Next, create and promote a release. 

### Create and Promote a Release

To create and promote a release using the replicated CLI:

1. Lint the manifest files and ensure that there are no errors in the YAML:

  ```bash
  replicated release lint --yaml-dir=PATH_TO_APP_DIR
  ```

  Replace `PATH_TO_APP_DIR` with path to the directory of the YAML manifest files.

1. Initialize the project as a Git repository. You only need to initialize a project once.

  **Example:**

  ```
  git init
  git add .
  git commit -m "Initial Commit: My Application"
  ```
  
  Initializing the project as a Git repository lets you track your history. The replicated CLI also reads Git metadata to help with the generation of release metadata, such as version labels.

1. Edit your files as needed, such as adding preflight specifications or other Replicated custom resources.

1. Lint the manifest files after you make changes to ensure that there are no errors in the YAML:

  ```bash
  replicated release lint --yaml-dir=PATH_TO_APP_DIR
  ```

  Replace `PATH_TO_APP_DIR` with the path to the directory of the YAML manifest files.

1. Create a new release or update an existing release. You can continue to update and lint an existing release until you are ready to promote it. Releases cannot be edited after they are promoted.

    - Create a release without promoting it:

      ```bash
      replicated release create --yaml-dir PATH_TO_APP_DIR
      ```
      Replace `PATH_TO_APP_DIR` with the path to the directory of the YAML manifest files.

    - Create and promote a release with the default settings, which includes the Unstable channel:

      ```bash
      replicated release create --auto
      ```

      The `--auto` flag generates release notes and metadata based on the Git status.
  
    - Create a release and promote with custom settings, such as a specific channel:

      ```bash
      replicated release create --yaml-dir PATH_TO_APP_DIR --promote CHANNEL
      ```

      Replace:

      - `PATH_TO_APP_DIR` with the path to the directory of the YAML manifest files.
      - `CHANNEL` with a channel name, such as Beta or Stable. Channel names are case sensitive.

    - Update an existing release:
      ```
      replicated release update SEQUENCE --yaml-dir PATH-TO-APP-DIRECTORY
      ```

      Replace:
      
      -  `SEQUENCE` with the release sequence number. This identifies the existing release to be updated.
      -  `PATH_TO_APP_DIR` with the path to the directory of the YAML manifest files.
     
  For more information about the commands and flags, see [release create](../reference/replicated-cli-release-create) and [release update](../reference/replicated-cli-release-update) in the replicated CLI documentation.

1. Promote the release and verify that it was promoted to the specified channel:

  ```
  replicated release ls
  ```
  
## Next Steps

The following are the recommended next steps to test the application in your development environment:

- To add a customer, see [Creating a Customer](creating-a-customer).
- If you are installing for the first time, see [Overview of Installing an Application with the App Manager](/enterprise/installing-overview) in the _Enterprise_ section. 
- If you are updating an existing installation, see [Updating an Application](../enterprise/updating-apps) in the _Enterprise_ section.

## Related Topics

* [About Releases](releases-about)
* [About Release Channels](releases-about-channels)
* [How to Package and Distribute a Production Application](distributing-workflow)
