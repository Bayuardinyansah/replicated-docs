import RequiredReleasesLimitations from "../partials/releases/_required-releases-limitations.mdx"
import RequiredReleasesDescription from "../partials/releases/_required-releases-description.mdx"
import ReleasePromotionXref from "../partials/releases/_kots-helm-release-promotion-xref.mdx"

# Managing Releases with the Vendor Portal

This topic describes how to use the Replicated vendor portal to create and promote releases, edit releases, edit release properties, and archive releases.

For information about creating and managing releases with the CLI, see [Managing Releases with the CLI](/vendor/releases-creating-cli).

For information about creating and managing releases with the Vendor API v3, see the [releases](https://replicated-vendor-api.readme.io/reference/createrelease) and [channelReleases](https://replicated-vendor-api.readme.io/reference/channelreleaseairgapbundleurl) sections in the Vendor API v3 documentation.

## Create a Release

A release contains one or more Helm charts. Alternatively, vendors that support Replicated KOTS installations can create a release with standard Kubernetes manifests only or use a combination of standard manifests and Helm charts. KOTS releases also support the use of Kubernetes Operators.

To create and promote a release in the vendor portal:

1. From the **Applications** dropdown list, select **Create an app** or select an existing application to update.

1. Click **Releases > Create release**. 

   ![Create Release](/images/release-create-new.png)

   [View a larger version of this image](/images/release-create-new.png)

1. If a drop down is displayed, select one of the following options:
   * **Create Helm-only release**: Create a release with one or more Helm charts. Supports installations with the Helm CLI only.
   * **Create KOTS release**: Create a release with one or more Helm charts or standard Kubernetes manifests. Supports installations with Replicated KOTS. For Helm charts, supports installation with KOTS and installation with the Helm CLI in the same release.

   If no drop down is displayed, continue to the next step.  

1. Add your files to the release:
   * For Helm-only releases, in the **Add the Replicated SDK to your Helm Chart** dialog, follow the steps to package your chart and upload a `.tgz` chart archive. For more information, see [Packaging a Helm Chart for a Release](/vendor/helm-install-release).
   
     <img src="/images/upload-helm-chart-modal.png" alt="upload helm chart dialog" width="550px"/>

     [View a larger version of this image](/images/upload-helm-chart-modal.png)

   * For KOTS releases, drag and drop your application files to the file directory in the YAML editor. You can also click the plus icon to add a new, untitled YAML file.
   
     For any Helm charts that you add, in the **Select Installation Method** dialog, select the version of the HelmChart custom resource that KOTS will use to install the chart. kots.io/v1beta2 is recommended. For more information about the HelmChart custom resource, see [Configuring the HelmChart Custom Resource](helm-native-v2-using).

     <img src="/images/helm-select-install-method.png" alt="select installation method dialog" width="550px"/>

     [View a larger version of this image](/images/helm-select-install-method.png)

1. Click **Save release**. This saves a draft that you can continue to edit until you promote it.
   
1. Click **Promote**. In the Promote Release dialog that opens, edit the fields:

   For more information about the requirements and limitations of each field, see <a href="releases-about#properties">Properties</a> in <em>About Channels and Releases</em>.

   <table>
    <tr>
      <th width="30%">Field</th>
      <th width="70%">Description</th>
    </tr>
    <tr>
      <td>Channel</td>
      <td>
        <p>Select the channel where you want to promote the release. If you are not sure which channel to use, use the default Unstable channel.</p>
        <p><ReleasePromotionXref/></p>
      </td>
    </tr>
    <tr>
      <td>Version label</td>
      <td>
        <p>Enter a version label.</p>
        <p>If you have one or more Helm charts in your release, the vendor portal automatically populates this field. You can change the version label to any <code>version</code> specified in any of the <code>Chart.yaml</code> files included in the release.</p>
      </td>
    </tr>
    <tr>
      <td>Requirements</td>
      <td>
        (KOTS Only) Select the <strong>Prevent this release from being skipped during upgrades</strong> to mark the release as required for KOTS installations. This option does not apply to installations with Helm.
      </td>
    </tr>
    <tr>
      <td>Release notes</td>
      <td>Add release notes. The release notes support markdown and are shown to your customer.</td>
    </tr>
   </table>

1. Click **Promote**.

   The release appears in an **Active** state on the Releases page.

## Edit a Draft Release

To edit a draft release:

1. From the **Applications** dropdown list, select an existing application to update.
1. On the **Releases** page, find the draft release you want to edit and click **Edit YAML**.

   <img src="/images/releases-edit-draft.png" alt="Edit YAML button for a draft release in the vendor portal" width="400"/>

   [View a larger image](/images/releases-edit-draft.png)

1. Click **Save** to save your updated draft.
1. (Optional) Click **Promote**.
  
## Edit Release Properties

You can edit the properties of a release at any time. For more information about release properties, see [Properties](releases-about#properties) in _About Channels and Releases_.

To edit release properties:

1. Go to **Channels**.
1. In the channel where the release was promoted, click **Release History**.
1. For the release sequence that you want to edit, click **Edit Release**.
1. Edit the properties as needed.
    <img src="/images/release-properties.png" alt="Release Properties dialog in the vendor portal" width="300"/>
    
    [View a larger image](/images/release-properties.png)
1. Click **Update Release**.

## Archiving Releases

You can archive releases to remove them from view on the Releases page. 

Archiving a release that has been promoted does not remove the release from the channel's Release History page or prevent KOTS from downloading the archived release.

To archive one or more releases:

1. From the Releases page, click the trash can icon in the upper right corner.
1. Select one or more releases.
1. Click **Archive Releases**.
1. Confirm the archive action when prompted. Alternatively, click **Cancel** to cancel the archiving action.