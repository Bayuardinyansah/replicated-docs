import SDKOverview from "../partials/replicated-sdk/_overview.mdx"

# KOTS and Embedded Cluster Onboarding 

This topic describes how to onboard with Replicated KOTS, including prerequisites and the list of custom resources to add to your releases in order to support KOTS installations.

## Overview

### Onboarding Best Practices and Recommendations

The following are some best practices and recommendations for successfully onboarding with Replicated:

* When integrating new Replicated features with an application, make changes in small iterations and test frequently by installing or upgrading the application in a development environment. This will help you to more easily identify issues and troubleshoot.

* Try creating and managing releases with both the Vendor Portal and the Replicated CLI. For more information, see [Installing the Replicated CLI](/reference/replicated-cli-installing).

* Ask for help from the Replicated community. For more information, see [Get Help from the Community](#get-help-from-the-community).

### Get Help from the Community

The [Replicated community site](https://community.replicated.com/) is a forum where Replicated team members and users can post questions and answers related to working with the Replicated Platform. It is designed to help Replicated users troubleshoot and learn more about common tasks involved with distributing, installing, observing, and supporting their application. 

Before posting in the community site, use the search to find existing knowledge base articles related to your question. If you are not able to find an existing article that addresses your question, create a new topic or add a reply to an existing topic so that a member of the Replicated community or team can respond.

To search and participate in the Replicated community, see https://community.replicated.com/.

## Before You Begin

If you are new to Replicated, complete the following prerequisites before you get started with KOTS and Embedded Cluster:

* Create an account in the Vendor Portal. You can either create a new team or join an existing team. For more information, see [Creating a Vendor Account](vendor-portal-creating-account).

* Install the Replicated CLI.

* Complete a basic quick start workflow to create an application and then promote and install initial releases in a development environment. This helps you get familiar with the process of creating, installing, and updating releases.

## Onboard

The custom resources are consumed by KOTS and are not deployed to the cluster.

For more information about creating releases, see [Managing Releases with the Vendor Portal](releases-creating-releases). For more information about installing and upgrading with KOTS, see [About Installing an Application](/enterprise/installing-overview) and [Performing Updates in Existing Clusters](/enterprise/updating-app-manager).

### Step 0: Package Your Helm Chart with the Replicated SDK

Add the Replicated SDK to your Helm chart as a dependency.

If you have more than one Helm chart, only add the SDK to the main Helm chart. Don't add the SDK to more than one Helm chart.

#### About the SDK

<SDKOverview/>

### Step 1: Connect Your Image Registry and Enable the Proxy Service

[Connecting to an External Registry](/vendor/packaging-private-images)

[Using the Proxy Service with Helm Installations](/vendor/helm-image-registry)

### Step 2: Configure KOTS HelmChart

The HelmChart custom resource is required to install Helm charts with KOTS and Embedded Cluster. It provides instructions for KOTS about how to deploy a given Helm chart.

For more information, see <a href="helm-native-v2-using">Configuring the HelmChart Custom Resource</a>.

### Step 3: Add Embedded Cluster Config

Add the Embedded Cluster Config to your application to support installations on VMs or bare metal servers. For more information, see [About Embedded Kubernetes](/vendor/embedded-kubernetes-overview).

Create an Embedded Cluster Config to support installations on VMs or bare metal servers with Replicated Embedded Cluster.

```yaml
apiVersion: embeddedcluster.replicated.com/v1beta1
kind: Config
spec:
  version: 1.8.0+k8s-1.29
```  

### Step 4: Customize the KOTS Admin Console {#admin-console}

The following custom resources can be added to customize the Admin Console experience for your application and enable recommended features for KOTS.

#### Add Application Name, Icon, and Status Informers

<a href="/reference/custom-resource-application">Application</a>

Example:

```yaml
apiVersion: kots.io/v1beta1
kind: Application
metadata:
  name: gitea
spec:
  title: Gitea
  icon: https://raw.githubusercontent.com/cncf/artwork/master/projects/kubernetes/icon/color/kubernetes-icon-color.png
  statusInformers:
    - deployment/gitea
```

#### Add Application Links to the Dashboard

Replicated recommends that every application include a Kubernetes SIG Application custom resource to add application links to the Admin Console dashboard.

For more information, see [Adding Application Links to the Dashboard](/vendor/admin-console-adding-buttons-links).

```yaml
apiVersion: app.k8s.io/v1beta1
kind: Application
metadata:
  name: "gitea"
spec:
  descriptor:
    links:
      - description: Open App
        url: ""
```  

### Step 5: Set Up the Admin Console Config Screen

Create a configuration screen in the Admin Console to collect required and optional configuration values from your users.

See:

* <a href="/vendor/admin-console-customize-config-screen">Creating and Editing Configuration Fields</a>
* Setting Helm Values with KOTS
*       

### Step 6: Configure Preflight Checks and Support Bundles

The Troubleshoot open-source project provides _preflight checks_ and _support bundles_.

#### Preflight Checks

Define preflight checks to test for system compliance during installation and upgrade to reduce the number of support escalations.

<a href="/vendor/preflight-defining">Defining Preflight Checks</a>

#### Support Bundles

Enable customers to quickly collect and analyze troubleshooting data from their clusters to help you diagnose problems with application deployments.

<a href="/vendor/support-bundle-customizing">Adding and Customizing Support Bundles</a>

### Step 7: Configure Backup and Restore

Enable snapshots with Velero so that end users can back up and restore their application data.

* Snapshots for existing cluster KOTS installs. See <a href="snapshots-configuring-backups">Configuring Backup and Restore</a>
* Disaster recovery feature for Embedded Cluster installs

### Step 8: Add Custom Domains

### Step 9: Customize Customer Licenses

Add custom license entitlements, and use the SDK API to check entitlements in the customer environment.

* Add custom entitlements
* Add entitlement checks
* License field signature validation

## Next Steps

### Customize Release Channels

### Configure Advanced Features

* Custom metrics
* SDK API 
* 

### Integrate with CI/CD and Compatibility Matrix

Compatibility Matrix