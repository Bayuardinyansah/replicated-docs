---
pagination_next: null
---

import DependencyYaml from "../partials/replicated-sdk/_dependency-yaml.mdx"
import HelmPackage from "../partials/helm/_helm-package.mdx"
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import HelmChartCr from "../partials/getting-started/_gitea-helmchart-cr-ec.mdx"
import KotsCr from "../partials/getting-started/_gitea-kots-app-cr-ec.mdx"
import K8sCr from "../partials/getting-started/_gitea-k8s-app-cr.mdx"
import EcCr from "../partials/getting-started/_gitea-ec-config.mdx"
import Requirements from "../partials/embedded-cluster/_requirements.mdx"
import Welcome from "../partials/getting-started/_quick-start-welcome.mdx"
import Objectives from "../partials/getting-started/_quick-start-objectives.mdx"
import Intro from "../partials/getting-started/_quick-start-intro.mdx"
import NextSteps from "../partials/getting-started/_quick-start-next-steps.mdx"
import CreateAccount from "../partials/getting-started/_quick-start-create-account.mdx"
import CreateApp from "../partials/getting-started/_quick-start-create-app.mdx"
import Preflights from "../partials/getting-started/_quick-start-preflights.mdx"

# Replicated Quick Start

<Welcome/>

## Introduction

<Objectives/>

* Working with the KOTS Admin Console

* Installing and updating applications on a VM with Embedded Cluster

## Set Up the Environment

Before you begin, ensure that you have access to a VM that meets the requirements for Embedded Cluster:

<Requirements/>

## Quick Start

<Intro/>

1. <CreateAccount/>

1. <CreateApp/>

1. Get the sample Bitnami Gitea Helm chart and add the Replicated SDK as a dependency:

   1. Run the following command to pull and untar version 1.0.6 of the Bitnami Gitea Helm chart:

      ```
      helm pull --untar oci://registry-1.docker.io/bitnamicharts/gitea --version 1.0.6
      ```
      For more information about this chart, see the [bitnami/gitea](https://github.com/bitnami/charts/tree/main/bitnami/gitea) repository in GitHub.

   1. Change to the new `gitea` directory that was created:
      
      ```bash
      cd gitea
      ```

   1. In the Helm chart `Chart.yaml`, add the Replicated SDK as a dependency:

      <DependencyYaml/>

      The Replicated SDK is a Helm chart that provides access to Replicated features and can be installed as a small service alongside your application. For more information, see [About the Replicated SDK](/vendor/replicated-sdk-overview).

   1. Update dependencies and package the Helm chart to a `.tgz` chart archive:

      <HelmPackage/>

1. Add the chart archive to a release:

   1. In the `gitea` directory, create a subdirectory named `manifests`:

      ```
      mkdir manifests
      ```

      You will add the files required to support installation with Replicated KOTS and Replicated Embedded Cluster to this subdirectory.

   1. Move the Helm chart archive that you created to `manifests`:

      ```
      mv gitea-1.0.6.tgz manifests
      ```

   1. In `manifests`, create the YAML manifests required to install the chart with Embedded Cluster:
      ```
      cd manifests
      ```
      ```
      touch gitea.yaml kots-app.yaml k8s-app.yaml embedded-cluster.yaml
      ```

   1. In each of the files that you created, paste the corresponding YAML provided in the tabs below:

      <Tabs>
      <TabItem value="helmchart" label="gitea.yaml" default>
      <h5>Description</h5>
      <p>The KOTS HelmChart custom resource provides instructions to KOTS about how to deploy the Helm chart. The <code>name</code> and <code>chartVersion</code> listed in the HelmChart custom resource must match the name and version of a Helm chart archive in the release. The <a href="/vendor/helm-optional-value-keys#conditionally-set-values"><code>optionalValues</code></a> field sets the specified Helm values when a given conditional statement evaluates to true. In this case, if the application is installed with Embedded Cluster, then the Gitea service type is set to `NodePort` and the node port is set to `"32000"`. This will allow Gitea to be accessed from the local machine after deployment for the purpose of this quick start.</p>
      <h5>YAML</h5>
      <HelmChartCr/>
      </TabItem>
      <TabItem value="kots-app" label="kots-app.yaml">
      <h5>Description</h5>
      <p>The KOTS Application custom resource enables features in the Replicated Admin Console such as branding, release notes, application status indicators, and custom graphs.</p><p>The YAML below provides a name for the application to display in the Admin Console, adds a custom <em>status informer</em> that displays the status of the <code>gitea</code> Deployment resource in the Admin Console dashboard, adds a custom application icon, and adds the port where the Gitea service can be accessed so that the user can open the application after installation.</p>
      <h5>YAML</h5>
      <KotsCr/>
      </TabItem>
      <TabItem value="k8s-app" label="k8s-app.yaml">
      <h5>Description</h5>
      <p>The Kubernetes Application custom resource supports functionality such as including buttons and links on the Replicated Admin Console dashboard. The YAML below adds an <strong>Open App</strong> button to the Admin Console dashboard that opens the application using the service port defined in the KOTS Application custom resource.</p>
      <h5>YAML</h5>
      <K8sCr/>
      </TabItem>
      <TabItem value="ec" label="embedded-cluster.yaml">
      <h5>Description</h5>
      <p>To install your application with Embedded Cluster, an Embedded Cluster Config must be present in the release. At minimum, the Embedded Cluster Config sets the version of Embedded Cluster that will be installed. You can also define several characteristics about the cluster.</p>
      <h5>YAML</h5>
      <EcCr/>
      </TabItem>
      </Tabs>

   1. Lint the YAML files:

      ```bash
      replicated release lint --yaml-dir .
      ```
      **Example output:**
      ```bash
      RULE                                  TYPE    FILENAME         LINE    MESSAGE
      config-spec                           warn                                                                                                                                                    Missing config spec
      preflight-spec                        warn                                                                                                                                                    Missing preflight spec
      troubleshoot-spec                     warn                                                                                                                                                    Missing troubleshoot spec
      nonexistent-status-informer-object    warn    kots-app.yaml    8       Status informer points to a nonexistent kubernetes object. If this is a Helm resource, this warning can be ignored.
      ```
      :::note
      You can ignore any warning messages for the purpose of this quick start.
      :::

   1. Create the release and promote it to the Unstable channel:

      ```bash
      replicated release create --yaml-dir . --promote Unstable
      ```
      **Example output**:
      ```bash
        • Reading manifests from . ✓
        • Creating Release ✓
          • SEQUENCE: 1
        • Promoting ✓
          • Channel 2kvjwEj4uBaCMoTigW5xty1iiw6 successfully set to release 1
      ```

1. Create a customer so that you can install the release in your VM with Embedded Cluster:

   1. In the [Vendor Portal](https://vendor.replicated.com), click **Customers > Create customer**.

      The **Create a new customer** page opens:

      ![Customer a new customer page in the Vendor Portal](/images/create-customer.png)

      [View a larger version of this image](/images/create-customer.png)

   1. For **Customer name**, enter a name for the customer. For example, `Example Customer`.

   1. For **Channel**, select **Unstable**. This allows the customer to install releases promoted to the Unstable channel.

   1. For **License type**, select **Development**.

   1. For **License options**, enable the following entitlements:
      * **KOTS Install Enabled**
      * **Embedded Cluster Enabled (Beta)**

   1. Click **Save Changes**.

1. Install the application with Embedded Cluster:
     
    1. On the page for the customer that you created, click **Install instructions > Embedded Cluster**.

       ![Customer install instructions dropdown](/images/customer-install-instructions-dropdown.png)

       [View a larger image](/images/customer-install-instructions-dropdown.png)

    1. In the **Embedded cluster install instructions** dialog, for the **Select a version** dropdown, select **latest**.

    1. On the command line, SSH onto your VM and run the commands in the **Embedded cluster install instructions** dialog to download the latest release, extract the installation artifacts, and install.

       <img width="500px" src="/images/embedded-cluster-install-dialog.png" alt="embedded cluster install instructions dialog"/>

       [View a larger version of this image](/images/embedded-cluster-install-dialog.png)

   1. When prompted, enter a password for accessing the KOTS Admin Console.

      The installation command takes a few minutes to complete.

      **Example output:**

      ```bash
      ? Enter an Admin Console password: ********
      ? Confirm password: ********
      ✔  Host files materialized!
      ✔  Running host preflights
      ✔  Node installation finished!
      ✔  Storage is ready!
      ✔  Embedded Cluster Operator is ready!
      ✔  Admin Console is ready!
      ✔  Additional components are ready!
      Visit the Admin Console to configure and install gitea-kite: http://104.155.145.60:30000
      ```

      At this point, the cluster is provisioned and the KOTS Admin Console is deployed, but the application is not yet installed.

   1. Go to the URL provided in the output to access to the Admin Console.
   
   1. Bypass the browser TLS warning by clicking **Continue to Setup**.

   1. Click **Advanced > Proceed**.

   1. On the **HTTPS for the Gitea Admin Console** page, select **Self-signed** and click **Continue**.

   1. On the login page, enter the Admin Console password that you created during installation and click **Log In**.

   1. On the **Nodes** page, you can view details about the VM where you installed, including its node role, status, CPU, and memory. Users can also optionally add additional nodes on this page before deploying the application. Click **Continue**. 

      The Admin Console dashboard opens.
      
   1. In the **Version** section, for version `0.1.0`, click **Deploy** then **Yes, Deploy**. 

      The application status changes from Missing to Unavailable while the `gitea` Deployment is being created.

   1. After a few minutes when the application status is Ready, click **Open App** to view the Gitea application in a browser:

      ![Admin console dashboard showing ready status](/images/gitea-ec-ready.png)

      [View a larger version of this image](/images/gitea-ec-ready.png)

      <img alt="Gitea app landing page" src="/images/gitea-app.png" width="600px"/>

      [View a larger version of this image](/images/gitea-app.png) 

   1. Return to the Vendor Portal and go to **Customers**. Under the name of the customer, confirm that you can see an active instance.
   
      This instance telemetry is automatically collected and sent back to the Vendor Portal by both KOTS and the Replicated SDK. For more information, see [About Instance and Event Data](/vendor/instance-insights-event-data).

   1. Under **Instance ID**, click on the ID to view additional insights including the versions of Kubernetes and the Replicated SDK running in the cluster where you installed the application. For more information, see [Instance Details](/vendor/instance-insights-details).    

1. <Preflights/>

   1. Move the chart archive to the `manifests` directory:

      ```bash
      mv gitea-1.0.7.tgz manifests
      ``` 

   1. In the `manifests` directory, open the KOTS HelmChart custom resource and update the `chartVersion`:

      ```yaml
      # KOTS HelmChart
      chartVersion: 1.0.7
      ```   

   1. Create and promote the new release:  

      ```bash
      replicated release create --yaml-dir manifests --promote Unstable
      ```
      **Example output**:
      ```bash
        • Reading manifests from manifests ✓
        • Creating Release ✓
          • SEQUENCE: 2
        • Promoting ✓
          • Channel 2kvjwEj4uBaCMoTigW5xty1iiw6 successfully set to release 2
      ```

1. On your VM, update the application instance to the new version that you just promoted:

   1. In the Admin Console, go to the **Version history** tab.

   1. Click **Check for update**.

   1. Click **Deploy** next to the new version. Then, **Yes, Deploy**.

      The preflight check that you added runs automatically during deployment.

   1. Next to the newly deployed version, click the **View preflight checks** icon to see the result of the "Slack Accessible" preflight check that you added:

      ![View preflights icon](/images/quick-start-ec-view-preflight.png)
     
      [View a larger version of this image](/images/quick-start-ec-view-preflight.png)

      ![Pass result for Slack Accessible preflight check](/images/quick-start-ec-slack-preflight.png)
     
      [View a larger version of this image](/images/quick-start-ec-slack-preflight.png)

1. Reset and reboot the VM to remove the installation:

   ```bash
   sudo ./APP_SLUG reset --reboot
   ```

## Next Steps

Congratulations! As part of this quick start, you:
* Added the Replicated SDK to a Helm chart
* Created a release with the Helm chart
* Installed the release on a VM with Embedded Cluster
* Viewed telemetry for the installed instance in the Vendor Portal
* Created a new release to add preflight checks to the application
* Updated the application from the Admin Console

<NextSteps/>

To get started, see [Replicated Onboarding](distributing-workflow).

## Related Topics

For more information about the Replicated Platform features mentioned in this quick start, see:

* [About Distributing Helm Charts with KOTS](/vendor/helm-native-about)
* [About Preflight Checks and Support Bundles](/vendor/preflight-support-bundle-about)
* [About the Replicated SDK](/vendor/replicated-sdk-overview)
* [Introduction to KOTS](/intro-kots)
* [Managing Releases with the CLI](/vendor/releases-creating-cli)
* [Packaging a Helm Chart for a Release](/vendor/helm-install-release)
* [Using Embedded Cluster](/vendor/embedded-overview)

## Related Tutorials

For additional tutorials related to this quick start, see:

* [Deploying a Helm Chart on a VM with Embedded Cluster](/vendor/tutorial-embedded-cluster-setup)
* [Adding Preflight Checks to a Helm Chart](/vendor/tutorial-preflight-helm-setup)
* [Deploying a Helm Chart with KOTS and the Helm CLI](/vendor/tutorial-kots-helm-setup)