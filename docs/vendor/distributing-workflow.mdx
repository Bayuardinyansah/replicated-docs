import SDKOverview from "../partials/replicated-sdk/_overview.mdx"
import BestPractices from "../partials/onboarding/_best-practices.mdx"
import Community from "../partials/onboarding/_community.mdx"
import Prerequisites from "../partials/onboarding/_prerequisites.mdx"
import PackageSdk from "../partials/onboarding/_package-sdk.mdx"
import PreflightSupportBundle from "../partials/onboarding/_preflight-support-bundle.mdx"

# KOTS and Embedded Cluster Onboarding 

This topic describes how to onboard applications that will support installation with Replicated KOTS, Replicated Embedded Cluster, and the Helm CLI.

If your application will support Helm CLI installations only, see [Helm CLI-Only Onboarding](/vendor/replicated-onboarding).

## Before You Begin

This section includes guidance and prerequisites to review before you begin onboarding your application.

### Best Practices and Recommendations

<BestPractices/>

### Getting Help from the Community

<Community/>

### Prerequisites

<Prerequisites/>

## Onboard

The custom resources are consumed by KOTS and are not deployed to the cluster.

For more information about creating releases, see [Managing Releases with the Vendor Portal](releases-creating-releases). For more information about installing and upgrading with KOTS, see [About Installing an Application](/enterprise/installing-overview) and [Performing Updates in Existing Clusters](/enterprise/updating-app-manager).

### Step 0: Package Your Helm Chart with the Replicated SDK

<PackageSdk/>

### Step 1: Connect Your Image Registry and Enable the Proxy Service

[Connecting to an External Registry](/vendor/packaging-private-images)

[Using the Proxy Service with Helm Installations](/vendor/helm-image-registry)

### Step 2: Configure KOTS HelmChart

The HelmChart custom resource is required to install Helm charts with KOTS and Embedded Cluster. It provides instructions for KOTS about how to deploy a given Helm chart.

For more information, see <a href="helm-native-v2-using">Configuring the HelmChart Custom Resource</a>.

### Step 3: Add Embedded Cluster Config

Add the Embedded Cluster Config to your application to support installations on VMs or bare metal servers. For more information, see [About Embedded Kubernetes](/vendor/embedded-kubernetes-overview).

Create an Embedded Cluster Config to support installations on VMs or bare metal servers with Replicated Embedded Cluster.

```yaml
apiVersion: embeddedcluster.replicated.com/v1beta1
kind: Config
spec:
  version: 1.8.0+k8s-1.29
```  

### Step 4: Customize the KOTS Admin Console {#admin-console}

The following custom resources can be added to customize the Admin Console experience for your application and enable recommended features for KOTS.

#### Add Application Name, Icon, and Status Informers

<a href="/reference/custom-resource-application">Application</a>

Example:

```yaml
apiVersion: kots.io/v1beta1
kind: Application
metadata:
  name: gitea
spec:
  title: Gitea
  icon: https://raw.githubusercontent.com/cncf/artwork/master/projects/kubernetes/icon/color/kubernetes-icon-color.png
  statusInformers:
    - deployment/gitea
```

#### Add Application Links to the Dashboard

Replicated recommends that every application include a Kubernetes SIG Application custom resource to add application links to the Admin Console dashboard.

For more information, see [Adding Application Links to the Dashboard](/vendor/admin-console-adding-buttons-links).

```yaml
apiVersion: app.k8s.io/v1beta1
kind: Application
metadata:
  name: "gitea"
spec:
  descriptor:
    links:
      - description: Open App
        url: ""
```  

### Step 5: Set Up the Admin Console Config Screen

Create a configuration screen in the Admin Console to collect required and optional configuration values from your users.

See:

* <a href="/vendor/admin-console-customize-config-screen">Creating and Editing Configuration Fields</a>
* Setting Helm Values with KOTS
*       

### Step 6: Configure Preflight Checks and Support Bundles

<PreflightSupportBundle/>

### Step 7: Configure Backup and Restore

Enable snapshots with Velero so that end users can back up and restore their application data.

* Snapshots for existing cluster KOTS installs. See <a href="snapshots-configuring-backups">Configuring Backup and Restore</a>
* Disaster recovery feature for Embedded Cluster installs

### Step 8: Add Custom Domains

### Step 9: Customize Customer Licenses

Add custom license entitlements, and use the SDK API to check entitlements in the customer environment.

* Add custom entitlements
* Add entitlement checks
* License field signature validation

## Next Steps

### Customize Release Channels

### Configure Advanced Features

* Custom metrics
* SDK API 
* 

### Integrate with CI/CD and Compatibility Matrix

Compatibility Matrix