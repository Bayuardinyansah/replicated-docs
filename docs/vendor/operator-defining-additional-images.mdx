import AirGapBundle from "../partials/airgap/_airgap-bundle.mdx"

# Defining Additional Images

This topic describes how to define additional images to be included in `.airgap` bundles.

## Overview

<AirGapBundle/>

When building the `.airgap` bundle for a release, KOTS finds and includes all images defined in the Pod specs for the release. During installation or upgrade, KOTS collects images from the `.airgap` bundle, then retags and pushes them to the registry supplied by the enterprise user.

Any required images that are _not_ defined in your application manifests must be listed in the `additionalImages` attribute of the KOTS Application custom resource. This ensures that the images are included in the `.airgap` bundle for the release.

## Define Additional Images for Air Gap Bundles

KOTS supports including the following types of images in the `additionalImages` field:

* Public images referenced by the docker pullable image name
* Images pushed to a private, linked registry referenced by the docker pullable name
* Images pushed to the Replicated registry referenced by the `registry.replicated.com` name

The following example demonstrates adding different images to `additionalImages`:

```yaml
apiVersion: kots.io/v1beta1
kind: Application
metadata:
  name: my-app
spec:
  additionalImages:
    - elasticsearch:7.6.0
    - registry.replicated.com/my-operator/my-private-image:abd123f
    - quay.io/orgname/private-image:v1.2.3
```

## Authentication

When creating the `.airgap` bundle or performing an online install, KOTS will ensure that private images are available, without sharing registry credentials with the installation.
Air gap packages include the image layers in the bundle. Online installs will rewrite externally hosted private images to be pulled from `proxy.replicated.com`.
When the installation sends credentials to `proxy.replicated.com` or `registry.replicated.com`, the credentials are based on the customer license file, and the credentials stop working when the license expires.

For more information, see [About the Replicated Proxy Service](/vendor/private-images-about).