---
pagination_next: null
---

import DependencyYaml from "../partials/replicated-sdk/_dependency-yaml.mdx"
import HelmPackage from "../partials/helm/_helm-package.mdx"
import Welcome from "../partials/getting-started/_quick-start-welcome.mdx"
import Objectives from "../partials/getting-started/_quick-start-objectives.mdx"
import Intro from "../partials/getting-started/_quick-start-intro.mdx"
import NextSteps from "../partials/getting-started/_quick-start-next-steps.mdx"
import CreateAccount from "../partials/getting-started/_quick-start-create-account.mdx"
import CreateApp from "../partials/getting-started/_quick-start-create-app.mdx"
import Preflights from "../partials/getting-started/_quick-start-preflights.mdx"
import InstanceInsights from "../partials/getting-started/_quick-start-instance-insights.mdx"

# Helm-Only Quick Start

<Welcome/>

This quick start applies to applications that will support installation with the Helm CLI only. If your application will also support installation with the Replicated KOTS and Replicated Embedded Cluster installers, see [KOTS and Embedded Cluster Quick Start](quick-start-embedded).

## Objectives

<Objectives/>

* Installing and updating releases using the Helm CLI

## Set Up the Environment

Before you begin, do the following to set up your environment:

* Ensure that you have kubectl access to a Kubernetes cluster. You can use any cloud provider or tool that you prefer to create a cluster, such as [Replicated Compatibility Matrix](/vendor/testing-how-to), Google Kubernetes Engine (GKE), or minikube.

* Install the Helm CLI. To install the Helm CLI using Homebrew, run: 

   ```
   brew install helm
   ```

   For more information, including alternative installation options, see [Install Helm](https://helm.sh/docs/intro/install/) in the Helm documentation.

## Quick Start

<Intro/>

1. <CreateAccount/>

1. <CreateApp/>

1. Get the sample Bitnami Gitea Helm chart and add the Replicated SDK as a dependency:

   1. Run the following command to pull and untar version 1.0.6 of the Bitnami Gitea Helm chart:

      ```
      helm pull --untar oci://registry-1.docker.io/bitnamicharts/gitea --version 1.0.6
      ```
      For more information about this chart, see the [bitnami/gitea](https://github.com/bitnami/charts/tree/main/bitnami/gitea) repository in GitHub.

   1. Change to the new `gitea` directory that was created:
      
      ```bash
      cd gitea
      ```

   1. In the Helm chart `Chart.yaml`, add the Replicated SDK as a dependency:

      <DependencyYaml/>

      The Replicated SDK is a Helm chart that provides access to Replicated features and can be installed as a small service alongside your application. For more information, see [About the Replicated SDK](/vendor/replicated-sdk-overview).

   1. Update dependencies and package the Helm chart to a `.tgz` chart archive:

      <HelmPackage/>

1. Add the chart archive to a release and promote the release to the Unstable channel:
   
     ```bash
     replicated release create --chart=gitea-1.0.6.tgz --promote=Unstable
     ```
     **Example output**:
     ```bash
     You are creating a release that will only be installable with the helm CLI.
     For more information, see
     https://docs.replicated.com/vendor/helm-install#about-helm-installations-with-replicated

     • Reading chart from gitea-1.0.6.tgz ✓
     • Creating Release ✓
       • SEQUENCE: 1
     • Promoting ✓
       • Channel 2kvspHtBIWqsNORGJw4KDv3L8eI successfully set to release 1
     ```

1. Create a customer so that you can install the release in your cluster:

   1. In the [Vendor Portal](https://vendor.replicated.com), click **Customers > Create customer**.

      The **Create a new customer** page opens:

      ![Customer a new customer page in the Vendor Portal](/images/create-customer.png)

      [View a larger version of this image](/images/create-customer.png)

   1. For **Customer name**, enter a name for the customer. For example, `Example Customer`.

   1. For **Channel**, select **Unstable**. This allows the customer to install releases promoted to the Unstable channel.

   1. For **License type**, select **Development**.

   1. For **Customer email**, enter an email address. An email address is required for Helm installations to authenticate with the Replicated registry. This email address is never used to send emails to customers.

   1. Click **Save Changes**.

   For more information, see [Creating and Managing Customers](/vendor/releases-creating-customer).

1. Install the application:

   1. Create a `gitea` namespace for the installation:

      ```
      kubectl create namespace gitea
      ```

   1. Update the current kubectl context to target the new `gitea` namespace. This ensures that the chart is installed in the `gitea` namespace without requiring you to set the `--namespace` flag with the `helm install` command:

      ```
      kubectl config set-context --namespace=gitea --current
      ```

   1. In the Vendor Portal, on the page for the customer that you created, click **Helm Install Instructions**.
   
   1. Run the commands in the **Helm install instructions** dialog to log in to the Replicated registry and install the chart in your cluster. Skip the steps to run preflight checks and install the Replicated SDK in integration mode.

      <img alt="Helm install instructions dialog" src="/images/helm-install-instructions-no-preflights.png" width="500px"/>
     
      [View a larger image](/images/helm-install-instructions-no-preflights.png)

      :::note
      Ignore the **No preflight checks found** warning. This warning appears because there are no specifications for preflight checks in the Helm chart archive. You will add preflight checks later.
      ::: 

   1. After the installation command completes, you can see that both the `gitea` Deployment and the Replicated SDK `replicated` Deployment were created:

      ```
      kubectl get deploy
      ```
      **Example output:**
      ```
      NAME         READY   UP-TO-DATE   AVAILABLE   AGE
      gitea        0/1     1            0           35s
      replicated   1/1     1            1           35s
      ```   

   1. Watch the `gitea` LoadBalancer service until an external IP is available:

      ```
      kubectl get svc gitea --watch
      ```

   1. After an external IP address is available for the `gitea` LoadBalancer service, confirm that you can open the application in a browser by going to `http://SERVICE_IP`, where `SERVICE_IP` is the external IP address for the `gitea` LoadBalancer service.

       <img alt="Gitea app landing page" src="/images/gitea-app.png" width="600px"/>
 
       [View a larger version of this image](/images/gitea-app.png)   

1. View instance insights for the installation:

   <InstanceInsights/>

1. <Preflights/>

   1. Create and promote a new release:

      ```bash
      replicated release create --chart=gitea-1.0.6.tgz --promote Unstable
      ```
      **Example output**:
      ```bash
      You are creating a release that will only be installable with the helm CLI.
      For more information, see
      https://docs.replicated.com/vendor/helm-install#about-helm-installations-with-replicated

      • Reading chart from gitea-1.0.6.tgz ✓
      • Creating Release ✓
        • SEQUENCE: 2
      • Promoting ✓
        • Channel 2kvspHtBIWqsNORGJw4KDv3L8eI successfully set to release 2
      ```

1. Upgrade to the new version:

   1. In the Vendor Portal, open the **Helm Install Instructions** for the customer again.

      The **Helm Install Instructions** dialog now includes steps for installing the preflight plugin and running preflight checks.

      <img alt="Helm install instructions with preflight commands" src="/images/helm-install-instructions-preflights.png" width="550px"/>

      [View a larger version of this command](/images/helm-install-instructions-preflights.png)
   
   1. Run the first command to log in to the registry.
   
   1. Run the second command to install the preflight plugin.
   
   1. Run the third command to run preflight checks.

      The results of the preflight checks are displayed in the CLI.

   1. Instead of running the install command, use Helm to upgrade the instance to the new release that you just promoted. The `helm upgrade` command is the same as the `helm install` command, replacing `install` with `upgrade`:

      ```
      helm upgrade gitea oci://registry.replicated.com/gitea/unstable/gitea
      ```

      See [Helm Upgrade](https://helm.sh/docs/helm/helm_upgrade/) in the Helm documentation.

   1. After the upgrade completes, return to the **Instance details** page in the Vendor Portal and confirm that you can see the new application version.

1. Uninstall the Helm chart and the Replicated SDK from your cluster:

   ```
   helm uninstall gitea
   ```

1. Delete the `gitea` namespace:

   ```bash
   kubectl delete namespace gitea
   ````

## Next Steps

Congratulations! As part of this quick start, you:
* Added the Replicated SDK to a Helm chart
* Created a release with a Helm chart in the Vendor Portal
* Installed the release in a cluster with the Helm CLI
* Viewed telemetry for the installed instance in the Vendor Portal
* Created a new release for the application
* Updated the application in the cluster

<NextSteps/>

To get started, see [Helm-Only Onboarding](replicated-onboarding).

## Related Topics

For more information about the Replicated Platform features mentioned in this quick start, see:

* [About Preflight Checks and Support Bundles](/vendor/preflight-support-bundle-about)
* [About the Replicated SDK](/vendor/replicated-sdk-overview)
* [Installing with Helm](/vendor/install-with-helm)
* [Managing Releases with the CLI](/vendor/releases-creating-cli)
* [Packaging a Helm Chart for a Release](/vendor/helm-install-release)