# Collecting Telemetry for Air Gap Instances (Beta)

This topic describes telemetry for instances in air gap environments with no outbound internet access. This information applies to instances installed with Replicated KOTS.

:::note
Air gap telemetry is in beta. The functionality, requirements, and limitations of air gap telemetry are subject to change.
:::

## Overview

**Air gap instances** operate in environments without outbound internet access. This limitation prevents these instances from sending telemetry data to the vendor portal via the Replicated SDK or KOTS.

:::note
For information on how the vendor portal collects data from online (internet-connected) instances, see [About Instance and Event Data](/vendor/instance-insights-event-data#about-reporting).
:::

To gather telemetry from air gap instances, Replicated analyzes support bundles that contain archived event files. The Replicated SDK, running in the customer's environment, continuously logs recent events in a Kubernetes Secret. This utilizes the established state/change detection logic which already powers the [Instance Telemetry feature](/vendor/instance-insights-details).

Uploaded support bundles from any customer contribute to a comprehensive dataset, providing tactical and strategic insights across all instances. This allows parity in the analysis of air-gapped and online instances.

To enrich this data further, additional bundles may be uploaded periodically. The system handles any overlapping event archives idempotently, ensuring data integrity.

### Packaging Telemetry in Support Bundles with KOTS

The process involves encapsulating event history within a support bundle. This bundle can be generated using either the `support-bundle` CLI or via the KOTS Admin Console. It includes:

- The `sdk-events` file
- Kubernetes statuses
- Application pod logs
- Etc.

Upon uploading to the vendor portal, the Replicated backend processes the `sdk-events` file, associating it with the correct customer and instance ID and updating the instance records accordingly.

## Collecting and Viewing Air Gap Telemetry

1. **Prepare Your Application**: Ensure your application includes a [support bundle spec](vendor/support-online-support-bundle-specs).

1. **Bundle Collection**: Instruct your customer to [generate a support bundle](/enterprise/troubleshooting-an-app) via the `kubectl support-bundle` [CLI](/enterprise/troubleshooting-an-app#generating-a-support-bundle-using-the-cli) or the [KOTS Admin Console’s Troubleshoot tab](/enterprise/troubleshooting-an-app#generate-a-support-bundle-using-the-admin-console).

1. **Upload the Bundle**: Go to the details page for the air gap instance and click the "Upload new bundle" button to upload a support bundle to the vendor portal. ![Configure Identity Provider](/images/airgap-upload-telemetry.png)

1. **Review Telemetry**: The telemetry data will start appearing on the page shortly. Please allow a few minutes for all data to be processed.

## Requirements

* **KOTS Version**: Requires KOTS v1.101.0 or later.
* **Support Bundle Origin**: Must be generated by KOTS. Support bundles created with generic troubleshoot specs, which do not include instance data, will not provide telemetry.
* **Air gap mode**: KOTS must operate in air gap mode to enable telemetry data collection within the support bundle.
* **Replicated SDK**: The Replicated SDK must be integrated to collect air gap telemetry data.

## Limitations

* Air gap telemetry is in beta
* Air gap telemetry is supported only for instances installed with KOTS. Air gap telemetry is not supported for instances installed with the Helm CLI.
* Telemetry data is capped at 4,000 events or 1MB—whichever limit is reached first. For optimal use, consider collecting support bundles regularly—monthly or quarterly—from your air gapped customers.
