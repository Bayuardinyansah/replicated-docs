# Collecting Telemetry for Air Gap Instances (Beta)

This topic describes how to collect telemetry for instances in air gap environments. The information in this topic applies to instances installed with Replicated KOTS.

:::note
Air gap telemetry is in beta. The functionality, requirements, and limitations of air gap telemetry are subject to change.
:::

## Overview

Air gap instances run in environments without outbound internet access. This limitation prevents these instances from sending telemetry data to the Replicated vendor portal through the Replicated SDK or Replicated KOTS. For information about how the SDK and KOTS send telemetry from online (internet-connected) instances, see [About Instance and Event Data](/vendor/instance-insights-event-data#about-reporting).

Instead, to gather telemetry from air gap instances, the vendor portal analyzes archived event files contained in customer-generated support bundles. When support bundles from air gap environments are uploaded to the vendor portal, these event files are processed and associated with the correct customer and instance ID. The vendor portal then updates the insights and event data for the instance accordingly.

The event files are named `sdk-events` and are created by the Replicated SDK, which continuously logs events in a Kubernetes Secret. The SDK uses the same state change logic used by the vendor portal to log events. For more information, see [How the Vendor Portal Generates Events and Insights](/vendor/instance-insights-event-data#about-events) in _About Instance and Event Data_.

In addition to the `sdk-events` files, the vendor portal also receives data such as Kubernetes statuses and application Pod logs from support bundles generated in air gap environments.

All support bundles that are uploaded to the vendor portal from any air gap customer contribute to a comprehensive dataset, providing parity in the telemetry for air gap and online instances. Replicated recommends that you collect support bundles from air gap customers regularly (monthly or quarterly) to improve the completeness of air gap telemetry. The vendor portal handles any overlapping event archives idempotently, ensuring data integrity.

## Requirements

Air gap telemetry has the following requirements:

* KOTS v1.101.0 or later must be installed in the environment where the instance is running
* The support bundle must be generated by KOTS. Generic troubleshoot specs (which do not include instance data) do not contribute to telemetry for air gap instances.
* KOTS must be running in air gapped mode to collect telemetry in the support bundle.
* The Replicated SDK must be installed alongside your application.

## Limitations

Air gap telemetry has the following limitations:

* Air gap telemetry is supported only for instances installed with KOTS. Air gap telemetry is not supported for instances installed with the Helm CLI.
* Telemetry data is capped at 4,000 events or 1MB; whichever limit is reached first. For optimal use, consider collecting support bundles regularly (monthly or quarterly) from air gap customers.

## Collect and View Air Gap Telemetry

To collect telemetry from air gap instances:

1. Instruct your customer to [generate a support bundle](/enterprise/troubleshooting-an-app) via the `kubectl support-bundle` [CLI](/enterprise/troubleshooting-an-app#generating-a-support-bundle-using-the-cli) or the [KOTS Admin Consoleâ€™s Troubleshoot tab](/enterprise/troubleshooting-an-app#generate-a-support-bundle-using-the-admin-console).

1. Upload your support bundle via the Customers page, Customer Reporting page, or the Instance Details page.

     ![upload new bundle button on instance details page](/images/airgap-upload-telemetry.png)

     The telemetry appears on the page shortly. Allow a few minutes for all data to be processed.
