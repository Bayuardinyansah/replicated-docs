import RepositoryCicdNote from "../partials/releases/_repository-cicd-note.mdx"
import CreateReleaseUi from "../partials/releases/_create-release-ui.mdx"
import CreateNewAppCli from "../partials/releases/_create-new-app-cli.mdx"

# Creating Releases with Standard Manifest Files

This topic describes how to use the Replicated vendor portal or the replicated CLI to create and promote versions of your application using standard manifest files.

<RepositoryCicdNote/>

## Using the Vendor Portal

<CreateReleaseUi/>

## Using the CLI

### Prerequisite

Before you can create an application release with the CLI for the first time, you must install the replicated CLI and create an API token. See [Installing the replicated CLI](/reference/replicated-cli-installing).

### Create an Application

<CreateNewAppCli/>

Next, create and promote a release. 

### Create and Promote a Release

To create and promote a release using the replicated CLI:

1. Lint the manifest files and ensure that there are no errors in the YAML:

  ```bash
  replicated release lint --yaml-dir=YAML_DIR
  ```

  Replace YAML_DIR with the root directory of the YAML application manifest files.

1. Initialize the project as a Git repository. You only need to initialize a project once.

  **Example:**

  ```
  git init
  git add .
  git commit -m "Initial Commit: My Application"
  ```
  
  Initializing the project as a Git repository lets you track your history. The replicated CLI also reads Git metadata to help with the generation of release metadata, such as version labels.

1. Edit your files as needed, such as adding preflight specifications or other Replicated custom resources.

1. Lint the manifest files after you make changes to ensure that there are no errors in the YAML:

  ```bash
  replicated release lint --yaml-dir=YAML_DIR
  ```

  Replace YAML_DIR with the root directory of the YAML application manifest files.

  You can also lint the file when you create a release, as shown in the next step.

1. From your application root directory, do one of the following actions to create, update, and promote a release. You can continue to update and lint an existing release until you are ready to promote it. Releases cannot be edited after they are promoted.

    - Lint and create (or update) a release without promoting it:

      ```bash
      replicated release create --yaml-dir YAML_DIR --lint
      ```
      Replace YAML_DIR with the root directory of the YAML application manifest files.

    - Create a release and promote a release with the default settings, which includes the Unstable channel:

      ```bash
      replicated release create --auto
      ```

      The `--auto` flag generates release notes and metadata based on the Git status.
  
    - Create a release and promote with custom settings:

      **Example:**

      ```bash
      replicated release create --yaml-dir YAML_DIR --promote CHANNEL
      ```

      Replace:

      - YAML_DIR with the root directory of the YAML application manifest files.
      - CHANNEL with the name of the channel that you want to promote to. Channel names are case sensitive.
    
      For more information about commands and flag options, see [release create](/reference/replicated-cli-release-create) in _Reference_.

    **Example output:**

    ```
        • Reading Environment ✓

      Prepared to create release with defaults:

          yaml-dir        "./manifests"
          promote         "Unstable"
          version         "Unstable-ba710e5"
          release-notes   "CLI release of master triggered by exampleusername [SHA: d4173a4] [31 Oct 22 08:51 MDT]"
          ensure-channel  true
          lint-release    true

      Create with these properties? [Y/n]
    ```

1. Type `y` and press **Enter** to confirm the prompt.

  **Example output:**

  ```text
    • Reading manifests from ./manifests ✓
    • Creating Release ✓
      • SEQUENCE: 1
    • Promoting ✓
      • Channel VEr0nhJBBUdaWpPvOIK-SOryKZEwa3Mg successfully set to release 1
  ```
  The release is created and promoted to the specified or default channel.

1. Verify that the release was promoted to the channel:

  ```
  replicated release ls
  ```
  
## Next Steps

The following are the recommended next steps to test the application in your development environment:

- To add a customer, see [Creating a Customer](creating-a-customer).
- If you are installing for the first time, see [Overview of Installing an Application with the App Manager](/enterprise/installing-overview) in the _Enterprise_ section. 
- If you are updating an existing installation, see [Updating an Application](../enterprise/updating-apps) in the _Enterprise_ section.

## Related Topics

* [About Releases](releases-about)
* [About Release Channels](releases-about-channels)
* [How to Package and Distribute a Production Application](distributing-workflow)
